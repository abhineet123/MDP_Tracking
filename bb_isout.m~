% Copyright 2011 Zdenek Kalal
%
% This file is part of TLD.
% 
% TLD is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
% 
% TLD is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with TLD.  If not, see <http://www.gnu.org/licenses/>.


function idx_out = bb_isout(bb,imsize)

% amazingly horrible and insidious piece of buggy crap
% so what it is essentially testing is whether ul is greater the given size
% and br is less than 1 which makes no sense at all for deciding whether
% this box lies within the extents of a patch of the given size; if the box
% was outside the patch, its ul would be less than 1 (or more correctly 0 
% but we can let that go considering the generally horrible nature of the 
% code here) and its br would be greater than the patch size

idx_out = bb(1,:) > imsize(2) | ...
bb(2,:) > imsize(1) | ...
bb(3,:) < 1 | ...
bb(4,:) < 1;